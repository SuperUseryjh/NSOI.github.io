<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NSOI 出题组 - 首页</title>
    <!-- 引入 Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入科技感字体，例如 'Space Mono' 或 'Inter' -->
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* 自定义滚动条样式，增加科技感 */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1a202c; /* 深色背景 */
        }
        ::-webkit-scrollbar-thumb {
            background: #4a5568; /* 滚动条颜色 */
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #63b3ed; /* 鼠标悬停时的颜色 */
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen flex flex-col font-mono">
    <!-- 头部区域 - 科技感设计 -->
    <header class="bg-gray-800 text-blue-300 py-4 text-center shadow-lg rounded-b-xl border-b-2 border-blue-500">
        <h1 class="text-4xl font-bold tracking-wider animate-pulse">NSOI 出题组</h1>
    </header>

    <!-- 导航栏 - 科技感设计 -->
    <nav class="bg-gray-700 py-3 text-center shadow-md rounded-xl mx-4 mt-4">
        <div class="container mx-auto flex flex-col sm:flex-row justify-center items-center space-y-2 sm:space-y-0 sm:space-x-8">
            <a href="about.html" class="text-blue-200 text-lg hover:text-blue-500 hover:underline transition duration-300 ease-in-out px-4 py-2 rounded-lg hover:bg-gray-600">关于我们</a>
            <a href="index.html" class="text-blue-500 text-lg underline font-bold transition duration-300 ease-in-out px-4 py-2 rounded-lg bg-gray-600">最新消息</a>
            <a href="contact.html" class="text-blue-200 text-lg hover:text-blue-500 hover:underline transition duration-300 ease-in-out px-4 py-2 rounded-lg hover:bg-gray-600">联系我们</a>
        </div>
    </nav>

    <!-- 主内容区域 -->
    <main class="flex-grow container mx-auto p-4 sm:p-6 lg:p-8">
        <div class="bg-gray-800 rounded-xl shadow-2xl p-8 mb-6 border border-blue-600 transition duration-300 ease-in-out">
            <h2 class="text-3xl font-bold text-blue-400 mb-6 text-center">最新消息</h2>
            <!-- 更改为 div，用于容纳多条新闻 -->
            <div id="latest-news-content" class="space-y-4">
                <p class="text-gray-400">正在加载最新消息...</p>
            </div>
        </div>
    </main>

    <!-- 底部区域 - 科技感设计 -->
    <footer class="bg-gray-800 text-blue-400 py-4 text-center mt-auto shadow-inner rounded-t-xl border-t-2 border-blue-500">
        <p class="text-sm tracking-wide">&copy; 2025 NSOI 出题组 - System Online</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const newsContentElement = document.getElementById('latest-news-content');
            // !!! 重要：将 'YOUR_CLOUDFLARE_WORKER_URL' 替换为您的Cloudflare Worker的实际URL !!!
            // 例如: const workerUrl = 'https://your-worker-name.your-username.workers.dev/api/news';
            const workerUrl = 'YOUR_CLOUDFLARE_WORKER_URL/api/news';

            if (newsContentElement) {
                newsContentElement.innerHTML = '<p class="text-gray-400">正在加载最新消息...</p>'; // 显示加载状态

                try {
                    const response = await fetch(workerUrl);
                    if (response.ok) {
                        const newsItems = await response.json(); // 期望返回JSON数组

                        if (Array.isArray(newsItems) && newsItems.length > 0) {
                            newsContentElement.innerHTML = ''; // 清空加载状态
                            newsItems.forEach(item => {
                                const newsParagraph = document.createElement('p');
                                newsParagraph.className = 'leading-relaxed text-gray-200 text-lg border-b border-gray-700 pb-2 mb-2 last:border-b-0 last:pb-0 last:mb-0'; // 添加一些样式
                                newsParagraph.innerHTML = `<span class="text-blue-300 font-semibold">${item.date}：</span>${item.content}`;
                                newsContentElement.appendChild(newsParagraph);
                            });
                        } else {
                            newsContentElement.innerHTML = '<p class="text-gray-400">目前没有最新消息。</p>';
                        }
                    } else {
                        // 如果响应不成功，显示错误信息
                        newsContentElement.innerHTML = `<p class="text-red-400">加载失败: ${response.status} ${response.statusText}</p>`;
                        console.error('Failed to fetch news:', response.status, response.statusText);
                    }
                } catch (error) {
                    // 捕获网络或其他错误
                    newsContentElement.innerHTML = '<p class="text-red-400">加载最新消息时发生网络错误或CORS问题。请检查Worker URL和CORS设置。</p>';
                    console.error('Error fetching news:', error);
                }
            }
        });
    </script>
</body>
</html>
